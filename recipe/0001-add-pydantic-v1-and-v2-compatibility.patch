From b2e6f4d3c567e4cfab8798e4c8482dae3fc8a4b9 Mon Sep 17 00:00:00 2001
From: "Lori A. Burns" <lori.burns@gmail.com>
Date: Mon, 31 Jul 2023 22:26:58 -0400
Subject: [PATCH] add pydantic v1 and v2 compatibility

---
 psi4/driver/driver_cbs.py    | 5 ++++-
 psi4/driver/driver_findif.py | 5 ++++-
 psi4/driver/driver_nbody.py  | 6 ++++--
 psi4/driver/task_base.py     | 5 ++++-
 4 files changed, 16 insertions(+), 5 deletions(-)

diff --git a/psi4/driver/driver_cbs.py b/psi4/driver/driver_cbs.py
index 29bc45e..07189b9 100644
--- a/psi4/driver/driver_cbs.py
+++ b/psi4/driver/driver_cbs.py
@@ -152,7 +152,10 @@ pp = pprint.PrettyPrinter(width=120, compact=True, indent=1)
 import logging
 
 import numpy as np
-from pydantic import Field, validator
+try:
+    from pydantic.v1 import Field, validator
+except ImportError:
+    from pydantic import Field, validator
 from qcelemental.models import AtomicResult, DriverEnum
 
 from psi4 import core
diff --git a/psi4/driver/driver_findif.py b/psi4/driver/driver_findif.py
index 1307441..db0dc5f 100644
--- a/psi4/driver/driver_findif.py
+++ b/psi4/driver/driver_findif.py
@@ -143,7 +143,10 @@ from functools import partial
 from typing import Any, Callable, Dict, Iterator, List, Optional, Tuple, Union, TYPE_CHECKING
 
 import numpy as np
-from pydantic import Field, validator
+try:
+    from pydantic.v1 import Field, validator
+except ImportError:
+    from pydantic import Field, validator
 from qcelemental.models import DriverEnum, AtomicResult
 from qcelemental import constants
 
diff --git a/psi4/driver/driver_nbody.py b/psi4/driver/driver_nbody.py
index d408c08..1cfb88d 100644
--- a/psi4/driver/driver_nbody.py
+++ b/psi4/driver/driver_nbody.py
@@ -149,8 +149,10 @@ import math
 from typing import Any, Callable, Dict, List, Literal, Optional, Sequence, Set, Tuple, Union, TYPE_CHECKING
 from ast import literal_eval
 from enum import Enum
-
-from pydantic import Field, validator
+try:
+    from pydantic.v1 import Field, validator
+except ImportError:
+    from pydantic import Field, validator
 
 import pprint
 pp = pprint.PrettyPrinter(width=120, compact=True, indent=1)
diff --git a/psi4/driver/task_base.py b/psi4/driver/task_base.py
index 0fe5095..b03e7fe 100644
--- a/psi4/driver/task_base.py
+++ b/psi4/driver/task_base.py
@@ -38,7 +38,10 @@ import logging
 import pprint
 from typing import Any, Dict, Optional, Tuple, Union, TYPE_CHECKING
 
-from pydantic import Field, validator
+try:
+    from pydantic.v1 import Field, validator
+except ImportError:
+    from pydantic import Field, validator
 import qcelemental as qcel
 from qcelemental.models import DriverEnum, AtomicInput, AtomicResult
 qcel.models.molecule.GEOMETRY_NOISE = 13  # need more precision in geometries for high-res findif
-- 
1.8.3.1

